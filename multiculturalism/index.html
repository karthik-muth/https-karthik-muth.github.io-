<!doctype html>
<html class="no-js" lang="">

<head>
    <meta charset="utf-8">
    <title>karthik | Swedish elections</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="how-to-make-a-story">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link href="../assets/main.css" rel="stylesheet">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&display=swap" rel="stylesheet">

</head>

<body>
    <!-- Lightweight client-side loader that feature-detects and load polyfills only when necessary -->
<script src="https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2/webcomponents-loader.min.js"></script>

<!-- Load the element definition -->
<script type="module" src="https://cdn.jsdelivr.net/gh/zerodevx/zero-md@2/dist/zero-md.min.js"></script>

    <nav class="navbar navbar-expand-sm">
        <div class="container-fluid">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="../index.html">Home</a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="wrapper">
        <div class="container">
            <h2 class="text-body-1">Sweden elections 2022</h2>
            <h4 class="text-h2">A visual history of "multiculturalism" in Sweden - and the society's attitude towards it
            </h4>

            <div class="row justify-content-center">
                <div class="col-lg-7 col-11">
                    <br><br><br>
                    <zero-md src="intro.md">
                        <template>
                            <link rel="stylesheet" href="../assets/main.css" />
                          </template>
                      </zero-md>
                </div>
            </div>

        </div>
        <div class="container-fluid" id="root">
            <div id="scrolly__section">
                <div class="scrolly__chart">
                    <iframe scrolling="no" src="https://flo.uri.sh/story/1624140/embed#slide-0"></iframe>
                </div>
                <div class="scrolly__content">
                    <div class="step" data-step="0">
                        <div class="text-block pa-2">
                            <p class="text-body-2">
                                After the war, Sweden opened its borders primarily for labour immigration.
                            </p>
                        </div>
                    </div>
                    <div class="step" data-step="1">

                        <div class="text-block pa-2">
                            <p class="text-body-2">
                                In the 1950s and 1960s, migrant workers moved from Finland and other European countries.
                                By the end of 1970, the share of the foreign-born population was nearly 7%,
                                and almost all of them were from Europe.
                            </p>
                        </div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="text-block pa-2">
                            <p class="text-body-2">
                                <!-- <b>Multiculturalism enters Swedish politics</b> -->
                                In 1975, the Swedish parliament voted
                                for multiculturalism. The following years saw a transition from a labour-based

                                to a refugee-based immigration. People primarily came from
                                the
                                Middle
                                East, South America and Yugoslavia.
                            </p>
                        </div>
                    </div>
                    <div class="step" data-step="4">
                        <!-- <b>Multiculturalism enters Swedish politics</b> -->
                        <div class="text-block pa-2">
                            <p class="text-body-2">Sweden joined the European Union In 1995 and the Schengen area in
                                2001. Following this, Sweden received more immigrants from Europe. By the end of 2010, nearly
                                15% of the
                                population were foreign-born of which 6% were
                                from outside Europe.
                            </p>
                        </div>
                    </div>
                    <div class="step" data-step="5">
                        <div class="text-block pa-2">
                            <p class="text-body-2">The 2010s saw more than 100k immigrants moving to Sweden
                                each year
                                reaching the peak of 163k in 2016 during the Syrian civil war. By the end of 2021,
                                nearly 20% of the population was born abroad.
                            </p>
                        </div>
                    </div>
                    <div class="step" data-step="6">
                        <div class="text-block pa-2">
                            <p class="text-body-2">Today, the population of Sweden is nearly 10.5
                                million of which around 2.1 million (20%) are
                                foreign-born. They represent more than 160 nationalities,
                                making
                                Sweden one of the most diverse countries in the world.
                            </p>
                        </div>
                    </div>
                    <div class="step" data-step="7">
                        <div class="text-block pa-2">
                            <p class="text-body-2">In addition to the <foreign-born>foreign-born people</foreign-born>,
                                6% of the Swedish population
                                are <born-in-sweden>born in Sweden to two foreign-born parents</born-in-sweden>. Thus
                                more than a quarter
                                are of foreign background.
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <hr style="width:50%;text-align:left;height:3px;border-width:2px">
        <div class="row justify-content-center">
            <div class="col-lg-7 col-11">
                <zero-md src="outro.md">
                    <template>
                        <link rel="stylesheet" href="../assets/main.css" />
                      </template>
                </zero-md>
            </div>
            </div>




        <div class="row justify-content-center">
            <div class="col-lg-7 col-11">
                <p class=" text-body-2 mb-5">
                    <hr style="width:50%;text-align:left;margin-left:0;height:3px;border-width:2px">
                    <b>Method and data</b>
                    <br><br>
                    Data can be found <a
                        href="https://www.statistikdatabasen.scb.se/pxweb/sv/ssd/START__BE__BE0101__BE0101Q/">here</a> and
                    <a href="https://www.mdpi.com/2076-0760/10/10/401/htm">here</a>. Note
                    that Oceania represents less than 0.1% of the population and hence is not shown in the graphs.<br><br>

                    Visualisation made with Flourish and scrollama.<br><br>

                    Any feedback/feedforward is highly appreciated. Send them on twitter @karthik_muth or email
                    at
                    feedforward.tome@gmail.com.
                    <br><br>
                </p>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
        crossorigin="anonymous"></script>
    <script src="https://unpkg.com/d3@5.9.1/dist/d3.min.js"></script>
    <script src="https://unpkg.com/intersection-observer"></script>
    <script src="https://unpkg.com/scrollama"></script>
    <script src="https://public.flourish.studio/resources/embed.js"></script>


    <!-- This code from here on is derived from the side-by-side code example from the scrollama library which can be found here: https://github.com/russellgoldenberg/scrollama  -->
    <!-- I tweaked the function for handleStepEnter to accomodate the Flourish story! -->

    <script>
        var scrolly = d3.select("#scrolly__section");
        var chart = scrolly.select(".scrolly__chart");
        var content = scrolly.select(".scrolly__content");
        var step = content.selectAll(".step");
        var linkHead = 'https://flo.uri.sh/story/1624140/embed#slide-'


        // initialize the scrollama
        var scroller = scrollama();

        // generic window resize listener event
        function handleResize() {
            // 1. update height of step elements
            var stepH = Math.floor(window.innerHeight * 1);
            step.style("height", stepH + "px");

            //            var figureHeight = window.innerHeight * 0.75;
            var figureHeight = window.innerHeight;

            var figureMarginTop = (window.innerHeight - figureHeight) / 2;

            chart
                .style("height", figureHeight + "px")
                .style("top", figureMarginTop + "px");

            // 3. tell scrollama to update new element dimensions
            scroller.resize();
        }

        // scrollama event handlers
        function handleStepEnter(response) {

            const textblock = step.select(".text-block");

            // add color to current step only
            textblock.classed("is-active", function (d, i) {
                return i === response.index;
            });

            // if (response.index == 3) {
            //     return;
            // }
            // else if (response.index > 3) {
            //     slide = response.index - 1;
            // }
            // else {
            //     slide = response.index;
            // }
            slide = response.index;


            d3.select('.scrolly__chart iframe')
                .attr('src', linkHead + slide);
        }

        function setupStickyfill() {
            d3.selectAll(".sticky").each(function () {
                Stickyfill.add(this);
            });
        }

        function init() {
            setupStickyfill();
            handleResize();
            scroller
                .setup({
                    step: "#scrolly__section .scrolly__content .step",
                    progress: true,
                    offset: 0.7,
                    debug: false
                })
                .onStepEnter(handleStepEnter);

            // setup resize event
            window.addEventListener("resize", handleResize);
        }

        init();
    </script>
</body>

</html>
